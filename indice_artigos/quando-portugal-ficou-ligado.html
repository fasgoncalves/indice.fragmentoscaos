<!DOCTYPE html>
<html lang="pt">
<head>
    <meta charset="UTF-8">
    <title>âš¡ Quando Portugal Ficou Ligado</title>
    
<style>
body {
    font-family: Arial, sans-serif;
    padding: 1rem;
    background-color: #fff;
    color: #000;
    position: relative;
}

.close-button {
    position: absolute;
    top: 1rem;
    left: 1rem;
    font-size: 2rem;
    text-decoration: none;
    color: #003366; /* azul escuro */
    z-index: 1000;
    background: none;
    border: none;
}

@media (max-width: 768px) {
    .close-button {
        font-size: 2.5rem;
    }
}
</style>

</head>
<body>

    <a href="index.html" class="close-button" title="Voltar">âœ•</a>
    <h1>âš¡ Quando Portugal Ficou Ligado</h1>
    <div class="meta">
        <p><strong>ğŸ“… 2025-10-25</strong></p>
        <p><a href="https://fasgoncalves.github.io/fragmentoscaos-html/2025/10/%e2%9a%a1-quando-portugal-ficou-ligado.html" target="_blank">ğŸ”— Ver artigo original</a></p>
    </div>

<p><img src="https://fasgoncalves.github.io/indice.fragmentoscaos/images/quando-portugal-ficou-ligado.png" alt="Miniatura do artigo" /></p>

<div style="background:#000;color:#e8eef4;font-family:'Georgia',serif;line-height:1.65;padding:26px;">

  <!-- ğŸ”¶ Chamada de Capa -->
  <div style="border-left:4px solid #ffcc66;padding-left:12px;margin-bottom:24px;">
    <h3 style="color:#ffcc66 !important;margin:0;">CrÃ³nica HistÃ³rica â€” A Rede que Venceu a Entropia</h3>
    <p style="margin:6px 0 0 0;">Em 1980, com computadores <b>ICL 1500</b>, modems e cÃ³digo em <b>assembler</b>, nasceu uma rede que ligou muitos bancos com as suas agÃªncias bancÃ¡rias e sistemas centrais, a <b>ForÃ§a AÃ©rea Portuguesa</b>, e algumas outras organizaÃ§Ãµes â€” fiÃ¡vel, resiliente e feita contra as limitaÃ§Ãµes das linhas analÃ³gicas da Ã©poca.</p>
  </div>

  <h2 style="color:#ffcc66 !important;text-align:center;margin-top:0;">
    ICL 1500 (1980): A Rede Portuguesa â€œÃ  Prova de Balaâ€
  </h2>

  <p style="text-align:center;font-size:0.92em;color:#cfd7df;margin-top:4px;">
    Por Francisco GonÃ§alves
 â€” Fragmentos do Caos
  </p>

  <!-- ğŸ§  Box de Factos -->
  <div style="border:1px solid #ffcc66;background:#111;padding:12px 14px;margin:22px 0;">
    <b>ğŸ“œ Box de Factos</b><br>
    Plataforma: <b>ICL 1500</b> (terminais/sistemas com cassete e versÃµes com disco no centro)<br>
    Ano: <b>1980</b><br>
    LigaÃ§Ãµes: <b>Modems analÃ³gicos</b> (tipicamente 300â€“1200-2400 bps), com fall back, sobre linhas com ruÃ­do e quedas frequentes<br>
    Protocolo: <b>Assembler e protocolos IBM e ICL adaptados para o efeito</b> (framing, CRC, ARQ, janelas deslizantes, timeouts, reenvios)<br>
    Ã‚mbito: <b>Bancos (agÃªncias pelo pais e sede), ForÃ§a AÃ©rea Portuguesa, e Bases pelo paÃ­s</b> e outros clientes nacionais<br>
    Distintivo: <b>Fiabilidade extrema</b> em infra-estrutura rudimentar â€” software â€œÃ  prova de balaâ€
  </div>

  <h3 style="color:#ffcc66 !important;">A realidade das linhas: ruÃ­do, ecos, quedas</h3>
  <p>Os computadores centrais tinham <i>hosts</i> pouco dotados para comunicaÃ§Ãµes. As linhas eram analÃ³gicas, com atenuaÃ§Ã£o, ecos e picos de ruÃ­do. O que falhava no cobre foi compensado em <b>engenharia de protocolo</b>: o <i>stack</i> que escrevi,  tornou o ICL 1500 num guardiÃ£o paciente â€” â€œescutava cada banda e insistia em vencer a entropiaâ€.</p>

  <h3 style="color:#ffcc66 !important;">O coraÃ§Ã£o do protocolo (feito Ã  unha)</h3>
  <ul style="margin-left:20px;">
    <li><b>Framing robusto</b> â€” cabeÃ§alho com STX, tamanho, sequÃªncia; rodapÃ© com ETX e <b>CRC-16</b>/BCC.</li>
    <li><b>Blocos compactos</b> â€” tipicamente 128â€“256 bytes por quadro, equilibrando latÃªncia/erro.</li>
    <li><b>ARQ com janelas deslizantes</b> â€” ACK/NAK e <b>retransmissÃ£o seletiva</b> em caso de erro.</li>
    <li><b>Controlo de fluxo</b> â€” XON/XOFF e RTS/CTS conforme o canal/porta.</li>
    <li><b>Timeouts adaptativos & backoff</b> â€” reenvio exponencial e <i>line probing</i> apÃ³s queda.</li>
    <li><b>PersistÃªncia transacional</b> â€” <i>journaling</i> local, confirmaÃ§Ãµes fim-a-fim, idempotÃªncia.</li>
    <li><b>Auto-recuperaÃ§Ã£o</b> â€” reconexÃ£o, re-negociaÃ§Ã£o de velocidade, re-sincronizaÃ§Ã£o de sequÃªncia.</li>
  </ul>

  <h3 style="color:#ffcc66 !important;">Como fluÃ­a a mensagem (alto nÃ­vel)</h3>
  <pre style="background:#0b0b0b;color:#e8eef4;padding:12px;border:1px solid #222;overflow:auto;">
enquanto houver_mensagens:
    bloco = ler_buffer()
    quadro = STX | LEN | SEQ | bloco | CRC | ETX
    enviar(quadro)
    aguardar(ACK, NAK, TIMEOUT)
    se ACK: gravar_confirmaÃ§Ã£o_e_avanÃ§ar()
    se NAK ou CRC_invalido: reenviar(SEQ)
    se TIMEOUT: backoff(); tentar_reconectar_se_preciso()
ao_final: enviar_FRAME_FIM(); fechar_sessÃ£o_com_log_integridade()
  </pre>

  <h3 style="color:#ffcc66 !important;">Do paÃ­s inteiro ao sistema central</h3>
  <p>Nas <b>agÃªncias bancÃ¡rias</b>, os ICL 1500 recolhiam dados de operaÃ§Ãµes; na sede, um ICL 1500 com <b>disco</b> actuava como nÃ³ central/host. O software fazia <b>store-and-forward</b>, verificava integridade, eliminava duplicados e alimentava o mainframe. Na <b>ForÃ§a AÃ©rea</b> e noutros clientes, o mesmo rigor: trÃ¡fego vital a passar em seguranÃ§a por linhas imperfeitas.</p>

  <h3 style="color:#ffcc66 !important;">MÃ©trica e confianÃ§a</h3>
  <p>Cada sessÃ£o gerava <b>logs precisos</b>: perdas, retransmissÃµes, tempo por bloco, disponibilidade do circuito. Essa telemetria permitia <b>diagnosticar rotas</b>, escolher horÃ¡rios menos ruidosos e provar o SLA de uma era sem SLAs.</p>

  <h3 style="color:#ffcc66 !important;">Legado</h3>
  <p>Antes de X.25 massificar, antes de TCP/IP chegar Ã s empresas, jÃ¡ tinha construÃ­do uma <b>rede fiÃ¡vel sobre o caos</b>. A liÃ§Ã£o permanece: quando a infra falha, o <b>protocolo certo</b> â€” pensado com elegÃ¢ncia e disciplina â€” transforma ruÃ­do em <strong>informaÃ§Ã£o confiÃ¡vel.</strong></p>

  <hr style="border:0;border-top:1px solid #333;margin:26px 0;">
  <p style="text-align:center;color:#aab3bd;font-style:italic;">
    â€œA entropia nÃ£o desiste â€” mas a teimosia da boa engenharia tambÃ©m nÃ£o.â€<br>
    â€” F. GonÃ§alves
  </p>
</div>

<p>[fc<em>footer</em>mini]</p>

</body>
</html>
